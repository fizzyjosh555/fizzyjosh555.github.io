{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nconst imageLoadedStyle = {\n    opacity: '1'\n};\n\nexport default class ImageFadeIn extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loaded: false\n        };\n\n        this.componentMounted = false;\n    }\n\n    onImageLoad = () => {\n        if (this.componentMounted) {\n            this.setState({ loaded: true });\n        }\n    }\n\n    componentDidMount() {\n        const imgSrc = this.props.src;\n        if (imgSrc) {\n            //load image in a new window.Image and update local state when image is loaded\n            let img = new window.Image();\n            img.src = imgSrc;\n            img.onload = this.onImageLoad;\n            this.componentMounted = true;\n        }\n    }\n\n    componentWillUnmount() {\n        this.componentMounted = false;\n    }\n\n    render() {\n\n        const { src, loadAsBackgroundImage, opacityTransition, style, ...rest } = this.props;\n        //add transition style\n        let imageStyle = {\n            opacity: '0'\n        };\n\n        imageStyle.transition = `opacity ${opacityTransition}s ease 0s`;\n\n        return (<React.Fragment>\n            {!loadAsBackgroundImage && (<img\n                src={src}\n                {...rest}\n                style={this.state.loaded ? { ...style, ...imageStyle, ...imageLoadedStyle } : imageStyle} />)\n            }{loadAsBackgroundImage && (<div\n                {...rest}\n                style={this.state.loaded ? { backgroundImage: `url('${src}')`, ...style, ...imageStyle, ...imageLoadedStyle } : imageStyle}>\n                {this.props.children}\n            </div>)\n            }</React.Fragment>)\n    }\n}\n\nImageFadeIn.propTypes = {\n  /** image source url.   */\n  src: PropTypes.string.isRequired,\n  /** if false, renders as an IMG tag. If true, renders a DIV with image as the background-image (style css). */\n  loadAsBackgroundImage: PropTypes.bool,\n  /** Duration of the fade in, in seconds (s). */\n  opacityTransition: PropTypes.number,\n  /** OnClick handler. */\n  onClick: PropTypes.func,\n}\n\nImageFadeIn.defaultProps = {\n    loadAsBackgroundImage: false,\n    opacityTransition: .5\n}"],"names":["imageLoadedStyle","ImageFadeIn","props","onImageLoad","componentMounted","setState","loaded","state","imgSrc","src","img","window","Image","onload","loadAsBackgroundImage","opacityTransition","style","rest","imageStyle","transition","backgroundImage","children","PureComponent","propTypes","PropTypes","string","isRequired","bool","number","func","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,mBAAmB;aACZ;CADb;;IAIqBC;;;yBAELC,KAAZ,EAAmB;;;6HACTA,KADS;;cASnBC,WATmB,GASL,YAAM;gBACZ,MAAKC,gBAAT,EAA2B;sBAClBC,QAAL,CAAc,EAAEC,QAAQ,IAAV,EAAd;;SAXW;;cAEVC,KAAL,GAAa;oBACD;SADZ;;cAIKH,gBAAL,GAAwB,KAAxB;;;;;;4CASgB;gBACVI,SAAS,KAAKN,KAAL,CAAWO,GAA1B;gBACID,MAAJ,EAAY;;oBAEJE,MAAM,IAAIC,OAAOC,KAAX,EAAV;oBACIH,GAAJ,GAAUD,MAAV;oBACIK,MAAJ,GAAa,KAAKV,WAAlB;qBACKC,gBAAL,GAAwB,IAAxB;;;;;+CAIe;iBACdA,gBAAL,GAAwB,KAAxB;;;;iCAGK;yBAEqE,KAAKF,KAF1E;gBAEGO,GAFH,UAEGA,GAFH;gBAEQK,qBAFR,UAEQA,qBAFR;gBAE+BC,iBAF/B,UAE+BA,iBAF/B;gBAEkDC,KAFlD,UAEkDA,KAFlD;gBAE4DC,IAF5D;;;gBAIDC,aAAa;yBACJ;aADb;;uBAIWC,UAAX,gBAAmCJ,iBAAnC;;mBAEQ;qBAAA,CAAO,QAAP;;iBACFD,qBAAD,IAA2B;yBACnBL;mBACDQ,IAFoB;2BAGjB,KAAKV,KAAL,CAAWD,MAAX,gBAAyBU,KAAzB,EAAmCE,UAAnC,EAAkDlB,gBAAlD,IAAuEkB,UAHtD,IADxB;yCAKwB;;iCACpBD,IADoB;+BAEjB,KAAKV,KAAL,CAAWD,MAAX,cAAsBc,4BAAyBX,GAAzB,QAAtB,IAA2DO,KAA3D,EAAqEE,UAArE,EAAoFlB,gBAApF,IAAyGkB,UAFxF;yBAGlBhB,KAAL,CAAWmB;;aARpB;;;;EA1CiCC;;;AAwDzCrB,YAAYsB,SAAZ,GAAwB;;SAEjBC,UAAUC,MAAV,CAAiBC,UAFA;;2BAICF,UAAUG,IAJX;;uBAMHH,UAAUI,MANP;;aAQbJ,UAAUK;CARrB;;AAWA5B,YAAY6B,YAAZ,GAA2B;2BACA,KADA;uBAEJ;CAFvB;;;;"}