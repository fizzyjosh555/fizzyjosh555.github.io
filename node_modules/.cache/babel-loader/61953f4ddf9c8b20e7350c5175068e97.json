{"ast":null,"code":"import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar imageLoadedStyle = {\n  opacity: '1'\n};\n\nvar ImageFadeIn = function (_PureComponent) {\n  inherits(ImageFadeIn, _PureComponent);\n\n  function ImageFadeIn(props) {\n    classCallCheck(this, ImageFadeIn);\n\n    var _this = possibleConstructorReturn(this, (ImageFadeIn.__proto__ || Object.getPrototypeOf(ImageFadeIn)).call(this, props));\n\n    _this.onImageLoad = function () {\n      if (_this.componentMounted) {\n        _this.setState({\n          loaded: true\n        });\n      }\n    };\n\n    _this.state = {\n      loaded: false\n    };\n    _this.componentMounted = false;\n    return _this;\n  }\n\n  createClass(ImageFadeIn, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var imgSrc = this.props.src;\n\n      if (imgSrc) {\n        //load image in a new window.Image and update local state when image is loaded\n        var img = new window.Image();\n        img.src = imgSrc;\n        img.onload = this.onImageLoad;\n        this.componentMounted = true;\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.componentMounted = false;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          src = _props.src,\n          loadAsBackgroundImage = _props.loadAsBackgroundImage,\n          opacityTransition = _props.opacityTransition,\n          style = _props.style,\n          rest = objectWithoutProperties(_props, ['src', 'loadAsBackgroundImage', 'opacityTransition', 'style']); //add transition style\n\n      var imageStyle = {\n        opacity: '0'\n      };\n      imageStyle.transition = 'opacity ' + opacityTransition + 's ease 0s';\n      return React.createElement(React.Fragment, null, !loadAsBackgroundImage && React.createElement('img', _extends({\n        src: src\n      }, rest, {\n        style: this.state.loaded ? _extends({}, style, imageStyle, imageLoadedStyle) : imageStyle\n      })), loadAsBackgroundImage && React.createElement('div', _extends({}, rest, {\n        style: this.state.loaded ? _extends({\n          backgroundImage: 'url(\\'' + src + '\\')'\n        }, style, imageStyle, imageLoadedStyle) : imageStyle\n      }), this.props.children));\n    }\n  }]);\n  return ImageFadeIn;\n}(PureComponent);\n\nImageFadeIn.propTypes = {\n  /** image source url.   */\n  src: PropTypes.string.isRequired,\n\n  /** if false, renders as an IMG tag. If true, renders a DIV with image as the background-image (style css). */\n  loadAsBackgroundImage: PropTypes.bool,\n\n  /** Duration of the fade in, in seconds (s). */\n  opacityTransition: PropTypes.number,\n\n  /** OnClick handler. */\n  onClick: PropTypes.func\n};\nImageFadeIn.defaultProps = {\n  loadAsBackgroundImage: false,\n  opacityTransition: .5\n};\nexport default ImageFadeIn;","map":{"version":3,"sources":["../src/index.js"],"names":["imageLoadedStyle","ImageFadeIn","PureComponent","loaded","imgSrc","img","window","src","loadAsBackgroundImage","opacityTransition","style","rest","imageStyle","backgroundImage","children","PropTypes","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,gBAAAA,GAAmB;WACZ;AADY,CAAzB;;IAIqBC,WAAAA,GAAAA,UAAAA,cAAAA,EAAAA;;;uBAEjB,K,EAAmB;;;yHAAA,K;;UAAA,W,GASL,YAAM;UACZ,KAAA,CAAJ,gB,EAA2B;cACvB,Q,CAAc;AAAEE,UAAAA,MAAAA,EAAhB;AAAc,S;;AAXH,K;;UAEf,K,GAAa;cACD;AADC,K;UAIb,gB,GAAA,K;;;;;;wCASgB;UACVC,MAAAA,GAAS,KAAA,KAAA,CAAf,G;;UACA,M,EAAY;;YAEJC,GAAAA,GAAM,IAAIC,MAAAA,CAAd,KAAU,E;YACV,G,GAAA,M;YACA,M,GAAa,KAAb,W;aACA,gB,GAAA,I;;;;;2CAIe;WACnB,gB,GAAA,K;;;;6BAGK;mBAEqE,KAFrE,K;UAEGC,GAFH,GAAA,MAAA,CAAA,G;UAEQC,qBAFR,GAAA,MAAA,CAAA,qB;UAE+BC,iBAF/B,GAAA,MAAA,CAAA,iB;UAEkDC,KAFlD,GAAA,MAAA,CAAA,K;UAE4DC,IAF5D,GAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,KAAA,EAAA,uBAAA,EAAA,mBAAA,EAAA,OAAA,CAAA,C,CAAA,C;;UAIDC,UAAAA,GAAa;iBACJ;AADI,O;iBAIjB,U,GAAA,aAAA,iBAAA,GAAA,W;aAEQ,KAAA,CAAA,aAAA,C,KAAA,CAAA,QAAA,E,IAAA,E,CACH,qB,IAA2B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;aACnBL;AADmB,OAAA,EAAA,IAAA,EAAA;eAGjB,KAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA,UAAA,EAAA,gBAAA,CAAA,GAJP;AACwB,OAAA,CAAA,CADxB,E,yBAKwB,KAAA,CAAA,aAAA,C,KAAA,E,aAAA,I,EAAA;eAEjB,KAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA;AAAsBM,UAAAA,eAAAA,EAAAA,WAAAA,GAAAA,GAAtB;AAAA,SAAA,EAAA,KAAA,EAAA,UAAA,EAAA,gBAAA,CAAA,GAFiB;AAAA,O,CAAA,E,KAGvB,K,CAAWC,QAHY,CALxB,C;;;;CA1CKb,CAAoBC,aAApBD,C;;AAwDrBA,WAAAA,CAAAA,SAAAA,GAAwB;;OAEjBc,SAAAA,CAAAA,MAAAA,CAFiB,UAAA;;;yBAICA,SAAAA,CAJD,IAAA;;;qBAMHA,SAAAA,CANG,MAAA;;;WAQbA,SAAAA,CAAUC;AARG,CAAxBf;AAWAA,WAAAA,CAAAA,YAAAA,GAA2B;yBAAA,KAAA;qBAEJ;AAFI,CAA3BA","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nconst imageLoadedStyle = {\n    opacity: '1'\n};\n\nexport default class ImageFadeIn extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loaded: false\n        };\n\n        this.componentMounted = false;\n    }\n\n    onImageLoad = () => {\n        if (this.componentMounted) {\n            this.setState({ loaded: true });\n        }\n    }\n\n    componentDidMount() {\n        const imgSrc = this.props.src;\n        if (imgSrc) {\n            //load image in a new window.Image and update local state when image is loaded\n            let img = new window.Image();\n            img.src = imgSrc;\n            img.onload = this.onImageLoad;\n            this.componentMounted = true;\n        }\n    }\n\n    componentWillUnmount() {\n        this.componentMounted = false;\n    }\n\n    render() {\n\n        const { src, loadAsBackgroundImage, opacityTransition, style, ...rest } = this.props;\n        //add transition style\n        let imageStyle = {\n            opacity: '0'\n        };\n\n        imageStyle.transition = `opacity ${opacityTransition}s ease 0s`;\n\n        return (<React.Fragment>\n            {!loadAsBackgroundImage && (<img\n                src={src}\n                {...rest}\n                style={this.state.loaded ? { ...style, ...imageStyle, ...imageLoadedStyle } : imageStyle} />)\n            }{loadAsBackgroundImage && (<div\n                {...rest}\n                style={this.state.loaded ? { backgroundImage: `url('${src}')`, ...style, ...imageStyle, ...imageLoadedStyle } : imageStyle}>\n                {this.props.children}\n            </div>)\n            }</React.Fragment>)\n    }\n}\n\nImageFadeIn.propTypes = {\n  /** image source url.   */\n  src: PropTypes.string.isRequired,\n  /** if false, renders as an IMG tag. If true, renders a DIV with image as the background-image (style css). */\n  loadAsBackgroundImage: PropTypes.bool,\n  /** Duration of the fade in, in seconds (s). */\n  opacityTransition: PropTypes.number,\n  /** OnClick handler. */\n  onClick: PropTypes.func,\n}\n\nImageFadeIn.defaultProps = {\n    loadAsBackgroundImage: false,\n    opacityTransition: .5\n}"]},"metadata":{},"sourceType":"module"}